import"../css/style.css";const data=[{ChemicalName:"Sodium Hydroxide",Vendor:"ChemCo Ltd.",Density:"2.13 ",Viscosity:"78 ",Packaging:"Drum",PackSize:50,Unit:"kg",Quantity:10},{ChemicalName:"Acetic Acid",Vendor:"LabSupplies Inc.",Density:"1.05 ",Viscosity:"1.22 ",Packaging:"Bottle",PackSize:1,Unit:"L",Quantity:25},{ChemicalName:"Benzene",Vendor:"ChemTrade Ltd.",Density:"0.87 ",Viscosity:"0.65 ",Packaging:"Canister",PackSize:20,Unit:"L",Quantity:5},{ChemicalName:"Ethanol",Vendor:"BioChem Corp.",Density:"0.789 ",Viscosity:"1.2 ",Packaging:"Bottle",PackSize:5,Unit:"L",Quantity:40},{ChemicalName:"Hydrogen Peroxide",Vendor:"Reagent Supplies",Density:"1.45 ",Viscosity:"1.245 ",Packaging:"Bottle",PackSize:2,Unit:"L",Quantity:30},{ChemicalName:"Sulfuric Acid",Vendor:"Industrial Chem.",Density:"1.84 ",Viscosity:"26.7 ",Packaging:"Drum",PackSize:100,Unit:"kg",Quantity:8},{ChemicalName:"Ammonium Nitrate",Vendor:"Agro Chemicals",Density:"1.725 ",Viscosity:"1.2 ",Packaging:"Bag",PackSize:25,Unit:"kg",Quantity:15},{ChemicalName:"Methanol",Vendor:"PureChem Ltd.",Density:"0.792 ",Viscosity:"0.59 ",Packaging:"Bottle",PackSize:1,Unit:"L",Quantity:50},{ChemicalName:"Phosphoric Acid",Vendor:"Chem Solutions",Density:"1.685 ",Viscosity:"3.38 ",Packaging:"Canister",PackSize:20,Unit:"L",Quantity:10},{ChemicalName:"Calcium Chloride",Vendor:"Minera Chem",Density:"2.15 ",Viscosity:"1.5 ",Packaging:"Bag",PackSize:25,Unit:"kg",Quantity:20}],tableheader=document.getElementById("table-head"),tablebody=document.getElementById("table-body"),headers=['<span class="material-symbols-outlined">check</span>',"Chemical Name","Vendor","Density g/m³","Viscosity m²/s ","Packaging","Pack Size","Unit","Quantity"];let selectedRowIndex=-1,isEditing=!1,currentEditingCell=null,isModified=!1;const saveButton=document.querySelector(".save");saveButton.disabled=!0,saveButton.style.cursor="not-allowed";const tr=document.createElement("tr");function loadTableData(){tablebody.innerHTML="",data.forEach(((e,t)=>{const a=document.createElement("tr"),i=document.createElement("td");i.innerHTML='<span class="material-symbols-outlined">check</span>',a.appendChild(i),Object.values(e).forEach(((e,i)=>{const n=document.createElement("td");n.innerText=e,n.style.width="10%",a.appendChild(n),n.addEventListener("dblclick",(e=>{e.stopPropagation(),editCell(n,t,i)}))})),a.addEventListener("click",(()=>selectRow(t))),tablebody.appendChild(a),t===selectedRowIndex&&a.classList.add("selected")}))}function selectRow(e){const t=document.querySelectorAll("tbody tr");t.forEach((e=>e.classList.remove("selected"))),t[e].classList.add("selected"),selectedRowIndex=e}function editCell(e,t,a){if(isEditing)return void alert("Finish the current edit before editing another cell.");const i=data[t],n=document.createElement("input");n.type="number"==typeof i[Object.keys(i)[a]]?"number":"text",n.value=i[Object.keys(i)[a]],n.style.width="90%",n.style.padding="5px",e.innerHTML="",e.appendChild(n),n.focus(),n.addEventListener("blur",(()=>saveCell(n.value,t,a,e))),n.addEventListener("keypress",(i=>{"Enter"===i.key&&saveCell(n.value,t,a,e)})),isEditing=!0,currentEditingCell=n}function saveCell(e,t,a,i){const n=data[t];if(1===a){if(!/^[A-Za-z\s]+$/.test(e))return void alert("Vendor must contain only letters.");n.Vendor=e}else if(2===a)n.Density=e;else if(3===a)n.Viscosity=e;else if(4===a){if(!/^[A-Za-z\s]+$/.test(e))return void alert("Packaging must contain only letters.");n.Packaging=e}else if(5===a){if(isNaN(e)||""===e.trim())return void alert("Pack Size must be a valid number.");n.PackSize=parseFloat(e)}else if(6===a){if(!/^[A-Za-z\s]+$/.test(e))return void alert("Unit must contain only letters.");n.Unit=e}else if(7===a){if(!Number.isInteger(Number(e)))return void alert("Quantity must be a valid integer.");n.Quantity=parseInt(e)}i.innerText=e,isEditing=!1,currentEditingCell=null,markAsModified()}function markAsModified(){isModified=!0,saveButton.disabled=!1,saveButton.style.cursor="pointer"}function resetModification(){isModified=!1,saveButton.disabled=!0,saveButton.style.cursor="not-allowed"}headers.forEach((e=>{const t=document.createElement("th");t.innerHTML=e,t.style.width="10%",tr.appendChild(t)})),tableheader.appendChild(tr),document.querySelector(".upward").addEventListener("click",(()=>{selectedRowIndex>0&&selectedRowIndex<data.length&&([data[selectedRowIndex-1],data[selectedRowIndex]]=[data[selectedRowIndex],data[selectedRowIndex-1]],selectedRowIndex--,loadTableData())})),document.querySelector(".downward").addEventListener("click",(()=>{selectedRowIndex>=0&&selectedRowIndex<data.length-1&&([data[selectedRowIndex+1],data[selectedRowIndex]]=[data[selectedRowIndex],data[selectedRowIndex+1]],selectedRowIndex++,loadTableData(),markAsModified())})),document.querySelector(".delete").addEventListener("click",(()=>{selectedRowIndex>=0&&selectedRowIndex<data.length&&(data.splice(selectedRowIndex,1),selectedRowIndex=-1,loadTableData(),markAsModified())})),document.querySelector(".replay").addEventListener("click",(()=>{loadTableData(),resetModification()})),saveButton.addEventListener("click",(()=>{isModified&&(alert("Data saved successfully!"),resetModification())})),document.querySelector(".circle").addEventListener("click",(()=>{data.push({ChemicalName:"New Chemical",Vendor:"New Vendor",Density:0,Viscosity:0,Packaging:"New Packaging",PackSize:0,Unit:"kg",Quantity:0}),loadTableData(),markAsModified()}));let sortDirection=!0;function sortTableByColumn(e){const t=["ChemicalName","Vendor","Density","Viscosity","Packaging","PackSize","Unit","Quantity"][e-1];data.sort(((e,a)=>{const i=e[t],n=a[t];return"string"==typeof i?sortDirection?i.localeCompare(n):n.localeCompare(i):sortDirection?i-n:n-i})),loadTableData()}document.querySelectorAll("th").forEach(((e,t)=>{t>0&&e.addEventListener("click",(()=>sortTableByColumn(t)))})),loadTableData();